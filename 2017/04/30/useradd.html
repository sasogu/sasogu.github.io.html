<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Gestionar usuaris des de terminal &middot; sasogu
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  
  <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_SVG"> </script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });
  </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <div class="sidebar-personal-info">
      <div class="sidebar-personal-info-section">
        <a href="http://gravatar.com/a90923fdcd1390792902804edddec90b">
          <img src="http://www.gravatar.com/avatar/a90923fdcd1390792902804edddec90b?s=350" title="View on Gravatar" alt="View on Gravatar" />
        </a>
      </div>
      <div class="sidebar-personal-info-section">
        <p>Apasionat de les TIC i d'aprendre compartint.</p>
      </div>
      
      
      
      <div class="sidebar-personal-info-section">
        <p>
        
        
        
        <a href="https://www.linkedin.com/in/sasogu">
          <i class="fa fa-linkedin" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="https://github.com/sasogu">
          <i class="fa fa-github" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="https://twitter.com/sasogu">
          <i class="fa fa-twitter" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="http://www.google.com/recaptcha/mailhide/d?k=01I3lZFiZYng9N3QxYEtsDaQ==&c=31wAnZkuKqcG0ATAqJN8Z3ln5kkYLA9TwkGc-IbygpM=">
          <i class="fa fa-envelope" aria-hidden="true"></i>
        </a>
        
        |
        
        
        
        <a href="https://telegram.me/sasogu">
          <i class="fa fa-telegram" aria-hidden="true"></i>
        </a>
        
        
        
        </p>
      </div>
      
    </div>
  </div>

  <nav class="sidebar-nav">
    
      
      
      

      

      <span class="foldable">
        <a class="sidebar-nav-item " href="/">
          Inici
        </a>

        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/categories/">
                Categories
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/blog/tags/">
                Tags
              </a>
          
        
          
            
            
            
              <a class="sidebar-nav-item sidebar-nav-item-sub " href="/search/">
                Buscar
              </a>
          
        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/links/">
          Enllaços
        </a>

        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/atom.xml">
          Feed
        </a>

        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="/about/">
          Qui sóc
        </a>

        
      </span>

    
      
      
      

      

      <span class="">
        <a class="sidebar-nav-item " href="https://github.com/sasogu/tottictac">
          Github Project
        </a>

        
      </span>

    

    <span class="sidebar-nav-item">Versió 0.6</span>
  </nav>

  <div class="sidebar-item">
    <p>
    &copy; 2017 sasogu Llicència <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a>.
    </p>
  </div>

  <div class="sidebar-item">
    <p>
    Gràcies a <a href="http://jekyllrb.com">jekyll</a> i <a href="http://codinfox.github.io">codinfox</a>
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home" title="sasogu">
              <img class="masthead-logo" src="/img/drac.png"/>
            </a>
            <small> TotTicTac: un espai personal per a compartir</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Gestionar usuaris des de terminal</h1>
  <!--   <span class="post-date">30 Apr 2017</span> -->
<span class="post-date"><time datetime="2017-04-30 12:16:26 +0200">30 d'abril del 2017</time></span>
   |
  
    <a href="/blog/tags/#lliurex" class="post-tag">lliurex</a>
  
    <a href="/blog/tags/#desktop" class="post-tag">desktop</a>
  
    <a href="/blog/tags/#terminal" class="post-tag">terminal</a>
  
  
  <article>
    <h2 id="afegir-usuaris">Afegir usuaris</h2>

<p><strong>Comandament:</strong> <code class="highlighter-rouge">useradd</code></p>

<p><strong>Sintaxis:</strong> <code class="highlighter-rouge">useradd [modificadors] login</code></p>

<p><strong>Modificadors:</strong></p>

<p>-c: afegeix un comentari (camp 5 de passwd)</p>

<p>-d: estableix el directori home de l’usuari que per defecte és /home/login (camp 6)</p>

<p>-e: data expiració del compte, amb format AAAA-MM-DD (camp 8 de shadow)</p>

<p>-g: nom del grup principal (ha d’existir el grup)</p>

<p>-G: noms dels altres grups als que pot pertanyer, separats per “,”</p>

<p>-s: shell per defecte. Si no s’especifica serà bash.</p>

<p>-m: crea el directori home si no existeix copia els fitxers del directori /etc/skel al directori home. Per defecte no el crea ni copia els fitxers. Es complementa amb -k.</p>

<p>-k: copia els fitxers del directori especificat en el directori home de l’usuari. Solament és vàlida junt amb -m.</p>

<h3 id="valors-per-defecte">Valors per defecte:</h3>

<p>El programa <strong>useradd</strong> utilitza una colecció de valors per defecte emmagatzemats en /etc/default/useradd.</p>

<p>Es poden veure els valors per defecte executant:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ useradd -D
</code></pre>
</div>

<p>Es pot observar que falta l’intèrpret de comandaments per defecte. Per afegir-lo hem de fer:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$useradd -D -s /bin/bash
</code></pre>
</div>

<p>També es pot editar el fitxer i afegir o ajustar els valors al nostre gust.</p>

<h3 id="combinacions">Combinacions:</h3>

<p><code class="highlighter-rouge">$sudo useradd login</code> -&gt; crea un usuari sense directori home.</p>

<p><code class="highlighter-rouge">$sudo useradd -m login</code> -&gt; crea un usuari amb directori home i li còpia els fitxers ubicats en /etc/skel.</p>

<p><code class="highlighter-rouge">$sudo useradd -m -d /home/nom_usuari login</code> -&gt; crea un usuari amb directori home diferent al que se li otorga per defecte, es a dir, diferent a /home/login i li còpia els fitxers ubicats en /etc/skel.</p>

<p><code class="highlighter-rouge">$sudo useradd -m -k /etc/skel/usuaris login</code> -&gt; crea un usuari amb directori home per defecte i li còpia els fitxers ubicats en /etc/skel/usuaris.</p>

<h2 id="modificar-usuaris">Modificar usuaris</h2>

<p><strong>Comandament:</strong> <code class="highlighter-rouge">usermod</code></p>

<p><strong>Sintaxis:</strong> <code class="highlighter-rouge">usermod [modificadors] login</code></p>

<h3 id="modificadors">Modificadors:</h3>

<p>-c: afegeix o modifica el comentari</p>

<p>-d: modifica el directori home</p>

<p>-e: canvia o estableix la data d’expiració del compte</p>

<p>-g: canvia el grup principal</p>

<p>-G: estableix altres grups per l’usuari</p>

<p>-l: canvia el login (camp 1 de passwd i 5 de shadow)</p>

<p>-L: bloqueja el compte de l’usuari no permetent ingressar al sistema</p>

<p>-s: canvia el shell per defecte</p>

<p>-u: canvia el UID de l’usuari</p>

<p>-U: desbloqueja un compte bloquejat amb -L</p>

<h2 id="eliminar-usuaris">Eliminar usuaris</h2>
<p><strong>Comandament:</strong> <code class="highlighter-rouge">userdel</code></p>

<p><strong>Notes:</strong> No es pot eliminar un usuari si ha ingressat al sistema. Elimina el compte de /etc/passwd i /etc/shadow però no elimina el directori de treball.</p>

<p><strong>Sintaxis:</strong> <code class="highlighter-rouge">userdel [modificadors] login</code></p>

<p><strong>Modificadors:</strong></p>

<p>-r: elimina el compte i, a més a més, el seu directori de treball amb el seu contingut i la bústia de correu.</p>

<p>-f: igual que -r però sense importar si l’usuari ha ingressat al sistema.</p>

<h2 id="assignar-o-modificar-contrassenyes">Assignar o modificar contrassenyes</h2>

<p><strong>Comandament:</strong> <code class="highlighter-rouge">passwd</code></p>

<p><strong>Notes:</strong> Només pot canviar les contrassenyes el propi usuari i el root. Disposa d’un sistema de validació que ens informarà de si la contrasenya és “coneguda”. Si no s’especifica el login canvia el password del compte actual.</p>

<p><strong>Sintaxis:</strong> <code class="highlighter-rouge">passwd [modificadors] login</code></p>

<h3 id="modificadors-1">Modificadors:</h3>

<p>-S: informa de la política del compte de l’usuari (estat del compte: L bloquejada, NP sense clau i P amb clau), data del darrer canvi de clau, temps de canvi de clau, temps d’avís i temps de desactivació)</p>

<p>-u: desbloqueja un compte bloquejat amb -L</p>

<p>-l: bloqueja el compte de l’usuari no permetent ingressar al sistema</p>

<p>-g: canvia o assigna la password a un grup</p>

  </article>
</div>

<div class="related">
  <h2>Articles relacionats</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/apunts/2017/05/02/markdown/">
            Apunts ràpids sobre Markdown
            <small><time datetime="2017-04-30 12:16:26 +0200">30 d'abril del 2017</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/04/29/github.html">
            GIT - Principals comandaments
            <small><time datetime="2017-04-30 12:16:26 +0200">30 d'abril del 2017</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/04/24/lightmd.html">
            Canviar fons de pantalla d'inici en Lliurex
            <small><time datetime="2017-04-30 12:16:26 +0200">30 d'abril del 2017</time></small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


<div class="comments">
  <h2>Comentaris</h2>
  <div id="disqus_thread"></div>
  <script>
var disqus_config = function () {
  this.page.url = 'http://localhost:4000/2017/04/30/useradd.html'; // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = '/2017/04/30/useradd'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
(function() {
  var d = document, s = d.createElement('script');
  s.src = '//tottictac.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
        }, false);
      })(document);
    </script>
    
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', '', 'auto');
ga('send', 'pageview');
    </script>
    
  </body>
  
  <script id="dsq-count-scr" src="//tottictac.disqus.com/count.js" async></script>
  
</html>
